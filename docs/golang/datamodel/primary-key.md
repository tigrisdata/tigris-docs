# Primary Key

A primary key uniquely identifies a document in the collection and enforces
the unique constraint. In the absence of a user-defined primary key, it is
auto-generated.

## Default primary key

### Embedding Tigris metadata model

The primary key can be implicitly defined by embedding Tigris collection model,
like shown below:

```go
type User struct {
	tigris.Model

    Name    string
    Balance float64
}
```

It adds an implicit `ID` field of type UUID to the collection model.
This is useful when the user document model doesn't have unique set of fields,
or the set of fields is not suitable to be a primary key due to size, type,
sensitive content, etc...

The `ID` field is automatically populated when the document inserted into collection.

For example using the model above:

```go
u := User{Name: "Harry", Balance: 1000}
_, err := user.Insert(ctx, &u)
// error handling here
fmt.Printf("Auto-generated user ID: %v\n", u.ID)
```

### User ID field

Use defined field with name "ID" or "Id" and type suitable for the primary key is
automatically marked as autogenerated primary key.

For example:

```go
type User struct {
    ID time.Time
    Name    string
    Balance float64
}
```

The ID field is automatically populated with a timestamp on insert.

### No primary key

When it's not expected to lookup documents by primary key, it can be omitted entirely.
Meaning that collection model is just user defined data fields, like:

```go
type Book struct {
    Title    string
    Abstract string
}
```

## Defining Primary Key

One or more fields in the struct can be specified as primary key by
configuring **tigris primary key** field tag. While the **autoGenerate** tag
can be used to instruct Tigris to automatically generate the values for this
field. The example below demonstrates a model with a single primary key field

```go
type UserDetail struct {
	Id    int `tigris:"primaryKey,autoGenerate"`
	Email string
	Age   int
}
```

## Composite Primary Key

Composite primary keys are also supported but in case of composite keys
order of the fields is important. The example below demonstrates
how the order of the fields are defined in case of a composite primary key

```go
type UserDetail struct {
	Id    int    `tigris:"primaryKey:1,autoGenerate"`
	Email string `tigris:"primaryKey:2"`
	Age   int
}
```
