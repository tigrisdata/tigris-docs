# Quickstart: Java

Tigris offers simple and intuitive APIs to make it easy for you get started
with any data architecture needs!

Setting up the database is instantaneous, as well - no need for tedious
configuration. You define the data model as part of the application code,
which then drives the database infrastructure without you having to
configure and provision database resources.

Furthermore, you can continue using your preferred programming language when
working with Tigris. There is no new database query language to learn!

The following guide will get you up and running with Java.

:::tip
‚è± This guide should require less than 5 minutes

:::

First let's review what you need to get going.

## Prerequisites

All you'll need is any computer running macOS or Linux, with the following
installed:

- [Docker](https://docs.docker.com/get-docker/)
- [JDK 1.8 or newer](https://adoptopenjdk.net/)

## Working locally

First let's get started with Tigris locally.

### Startup Tigris locally via Docker

The first step is to install the CLI

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<Tabs>
<TabItem value="macOS" label="macOS">

```shell
curl -sSL https://tigris.dev/cli-macos | sudo tar -xz -C /usr/local/bin
```

</TabItem>
<TabItem value="Linux" label="Linux">

```shell
curl -sSL https://tigris.dev/cli-linux | sudo tar -xz -C /usr/local/bin
```

</TabItem>
</Tabs>

Next we start up Tigris locally using the _tigris_ cli

```shell
tigris local up
```

Once this command has completed, Tigris server will be available on port
`8081`.

## Add the client library dependency to your project

```xml
<dependency>
    <groupId>com.tigrisdata</groupId>
    <artifactId>tigris-client</artifactId>
    <version>${tigris.client.java.version}</version>
</dependency>
```

For latest version and for other dependency management or build
tool you can refer to dependency
snippet from [here](https://mvnrepository.com/artifact/com.tigrisdata/tigris-client)

## Quickstart

```java title=TigrisApp.java
import com.tigrisdata.db.annotation.TigrisPrimaryKey;
import com.tigrisdata.db.client.Filters;
import com.tigrisdata.db.client.StandardTigrisClient;
import com.tigrisdata.db.client.TigrisClient;
import com.tigrisdata.db.client.TigrisCollection;
import com.tigrisdata.db.client.TigrisDatabase;
import com.tigrisdata.db.client.UpdateFields;
import com.tigrisdata.db.client.config.TigrisConfiguration;
import com.tigrisdata.db.client.error.TigrisException;
import com.tigrisdata.db.type.TigrisCollectionType;

import java.util.Objects;

public class TigrisApp {

  public static void main(String[] args) throws TigrisException {
    // configuration
    TigrisConfiguration config =
        TigrisConfiguration.newBuilder("localhost:8081")
            .withNetwork(
                TigrisConfiguration.NetworkConfig.newBuilder()
                    .usePlainText() // for dev env - plaintext communication
                    .build())
            .build();

    // construct client
    TigrisClient client = StandardTigrisClient.getInstance(config);

    // create or get db
    TigrisDatabase helloDB = client.createDatabaseIfNotExists("hello_db");

    // create or update collection(s)
    helloDB.createOrUpdateCollections(User.class);

    // get collection
    TigrisCollection<User> users = helloDB.getCollection(User.class);

    // insert
    users.insert(new User(1, "Jania McGrory", 6045.7));
    users.insert(new User(2, "Bunny Instone", 2948.87));

    // read
    User user1 = users.readOne(Filters.eq("id", 1)).get();

    // update
    users.update(
        Filters.eq("id", 1), UpdateFields.newBuilder().set("name", "Jania McGrover").build());

    // global, ACID transaction with strict serializability using
    // optimistic concurrency control
    // transfer between users
    helloDB.transact(
        (tx) -> {
          try {
            User jania = users.readOne(tx, Filters.eq("id", 1)).get();
            User bunny = users.readOne(tx, Filters.eq("id", 1)).get();

            users.update(
                tx,
                Filters.eq("id", 1),
                UpdateFields.newBuilder().set("balance", jania.getBalance() - 100).build());

            users.update(
                tx,
                Filters.eq("id", 2),
                UpdateFields.newBuilder().set("balance", bunny.getBalance() + 100).build());

          } catch (TigrisException ex) {
            throw new IllegalStateException("Transaction failed", ex);
          }
        });

    // delete - delete users with id 1 or 2
    users.delete(
            Filters.or(
                    Filters.eq("id", 1),
                    Filters.eq("id", 2)
            )
    );
  }

  public static class User implements TigrisCollectionType {
    @TigrisPrimaryKey(1)
    private int id;
    private String name;
    private double balance;

    public User() {}

    public User(int id, String name, double balance) {
      this.id = id;
      this.name = name;
      this.balance = balance;
    }

    public int getId() {
      return id;
    }

    public void setId(int id) {
      this.id = id;
    }

    public String getName() {
      return name;
    }

    public void setName(String name) {
      this.name = name;
    }

    public double getBalance() {
      return balance;
    }

    public void setBalance(double balance) {
      this.balance = balance;
    }

    @Override
    public boolean equals(Object o) {
      if (this == o) return true;
      if (o == null || getClass() != o.getClass()) return false;
      User user = (User) o;
      return id == user.id
          && Double.compare(user.balance, balance) == 0
          && Objects.equals(name, user.name);
    }

    @Override
    public int hashCode() {
      return Objects.hash(id, name, balance);
    }
  }
}
```
